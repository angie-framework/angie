#!/bin/env node

// TODO put this in runtime to not have to babel
// require('babel/register');

import Config from '../src/Config';
import createProject from '../src/util/scaffold/project';
import createInstance from '../src/util/scaffold/instance';
import {default as DB} from '../src/Database';
import server from '../src/Server';

const p = process;

let args = p.argv,
    node = args.indexOf('node');

// Remove trivial arguments
if (node > -1) {
    args.splice(node, 1);
}

// Fetch configs
new Config().then(function() {
    switch (args[1]) {
        case 'server':
            server();
            break;
        case 'createProject':
            createProject(args[2]);
            break;
        case 'createInstance':
            createInstance(args[2]);
            break;
        case 'syncdb':
            new DB();
            break;
        case 'migrations':
        default:
            server();
    }
}, function() {
    p.exit(1);
});


// TODO make all commands here
    // TODO scaffold application
    // TODO make instance (app)
    // TODO create database
    // TODO migrate database
    // TODO server
    // TODO shell
